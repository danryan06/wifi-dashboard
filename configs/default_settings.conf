# Wi-Fi Test Dashboard Enhanced Settings Configuration
# Version: 5.0.1 - Enhanced Wi-Fi Traffic

# =============================================================================
# DASHBOARD SETTINGS
# =============================================================================

# Logging configuration
LOG_LEVEL=INFO
REFRESH_INTERVAL=30
CURL_TIMEOUT=10

# Test URLs for connectivity testing (comma-separated)
TEST_URLS=https://www.google.com,https://www.cloudflare.com,https://www.github.com,https://www.juniper.net

# Dashboard web interface settings
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=5000
DASHBOARD_DEBUG=false

# =============================================================================
# INTERFACE-SPECIFIC TRAFFIC GENERATION SETTINGS
# =============================================================================

# Enable interface-specific traffic generation
ENABLE_INTERFACE_TRAFFIC=true

# Per-interface traffic configuration
# Traffic types: all, speedtest, downloads, youtube, ping
# Intensities: light, medium, heavy

# Ethernet interface (eth0) - Medium traffic for baseline comparison
ETH0_TRAFFIC_TYPE=all
ETH0_TRAFFIC_INTENSITY=medium

# Wi-Fi interface 1 (wlan0) - HEAVY traffic for primary Wi-Fi testing (Good Client)
WLAN0_TRAFFIC_TYPE=all
WLAN0_TRAFFIC_INTENSITY=heavy

# Wi-Fi interface 2 (wlan1) - Light traffic for authentication failure testing (Bad Client)
WLAN1_TRAFFIC_TYPE=ping
WLAN1_TRAFFIC_INTENSITY=light

# =============================================================================
# ENHANCED WI-FI TRAFFIC SETTINGS
# =============================================================================

# Wi-Fi specific traffic boost
WIFI_TRAFFIC_MULTIPLIER=2.0          # Multiply Wi-Fi traffic by this factor
WIFI_PRIORITY_INTERFACE=wlan0        # Prioritize this interface for heavy traffic
WIFI_CONCURRENT_STREAMS=8            # Number of concurrent traffic streams for Wi-Fi

# Enhanced download settings for Wi-Fi
WIFI_DOWNLOAD_URLS="https://proof.ovh.net/files/1Gb.dat,https://speed.hetzner.de/1GB.bin,https://ash-speed.hetzner.com/1GB.bin,http://ipv4.download.thinkbroadband.com/200MB.zip,https://releases.ubuntu.com/20.04/ubuntu-20.04.6-desktop-amd64.iso"

# =============================================================================
# SPEEDTEST CONFIGURATION
# =============================================================================

# Enable speedtest CLI integration
ENABLE_SPEEDTEST=true

# Enhanced speedtest intervals by intensity (seconds)
SPEEDTEST_INTERVAL_LIGHT=600    # 10 minutes
SPEEDTEST_INTERVAL_MEDIUM=180   # 3 minutes  
SPEEDTEST_INTERVAL_HEAVY=60     # 1 minute (increased frequency for Wi-Fi)

# Speedtest CLI options
SPEEDTEST_SERVER_ID=""          # Leave empty for auto-selection
SPEEDTEST_ACCEPT_LICENSE=true
SPEEDTEST_ACCEPT_GDPR=true

# Wi-Fi specific speedtest settings
WIFI_SPEEDTEST_SERVERS="auto,nearby"  # Try auto and nearby servers
WIFI_SPEEDTEST_PARALLEL=true          # Enable parallel testing

# =============================================================================
# DOWNLOAD TRAFFIC CONFIGURATION
# =============================================================================

# Enable HTTP/HTTPS download traffic
ENABLE_DOWNLOAD_TRAFFIC=true

# Enhanced download intervals by intensity (seconds)
DOWNLOAD_INTERVAL_LIGHT=300     # 5 minutes
DOWNLOAD_INTERVAL_MEDIUM=60     # 1 minute
DOWNLOAD_INTERVAL_HEAVY=30      # 30 seconds (much more aggressive for Wi-Fi)

# Enhanced concurrent downloads by intensity
CONCURRENT_DOWNLOADS_LIGHT=2
CONCURRENT_DOWNLOADS_MEDIUM=4
CONCURRENT_DOWNLOADS_HEAVY=8    # More concurrent downloads for heavy Wi-Fi traffic

# Enhanced download chunk sizes by intensity (bytes)
DOWNLOAD_CHUNK_LIGHT=52428800    # 50MB
DOWNLOAD_CHUNK_MEDIUM=157286400  # 150MB
DOWNLOAD_CHUNK_HEAVY=524288000   # 500MB (larger chunks for Wi-Fi stress testing)

# Maximum total download size per session
MAX_DOWNLOAD_SIZE=1073741824     # 1GB (increased for Wi-Fi testing)

# Enhanced download test URLs (will be used randomly)
DOWNLOAD_URLS="https://proof.ovh.net/files/1Gb.dat,https://speed.hetzner.de/1GB.bin,https://ash-speed.hetzner.com/1GB.bin,http://ipv4.download.thinkbroadband.com/200MB.zip,https://releases.ubuntu.com/20.04/ubuntu-20.04.6-desktop-amd64.iso,https://proof.ovh.net/files/100Mb.dat,https://speed.hetzner.de/100MB.bin"

# =============================================================================
# YOUTUBE TRAFFIC CONFIGURATION
# =============================================================================

# Enable YouTube traffic simulation
ENABLE_YOUTUBE_TRAFFIC=true

# Enhanced YouTube traffic intervals by intensity (seconds)
YOUTUBE_INTERVAL_LIGHT=900      # 15 minutes
YOUTUBE_INTERVAL_MEDIUM=300     # 5 minutes
YOUTUBE_INTERVAL_HEAVY=120      # 2 minutes (more frequent for Wi-Fi)

# Enhanced YouTube playlists and videos for traffic generation
YOUTUBE_PLAYLIST_URL=https://www.youtube.com/playlist?list=PLrAXtmRdnEQy5tts6p-v1URsm7wOSM-M0
YOUTUBE_FALLBACK_VIDEOS="https://www.youtube.com/watch?v=dQw4w9WgXcQ,https://www.youtube.com/watch?v=jNQXAC9IVRw,https://www.youtube.com/watch?v=9bZkp7q19f0,https://www.youtube.com/watch?v=QH2-TGUlwu4"

# Enhanced YouTube download settings
YOUTUBE_MAX_DURATION=600        # 10 minutes max per video (longer for stress testing)
YOUTUBE_QUALITY=best[height<=720]  # Higher quality for more bandwidth usage
YOUTUBE_MAX_DOWNLOADS=4         # More videos per session for Wi-Fi
YOUTUBE_CONCURRENT_STREAMS=2    # Multiple YouTube streams simultaneously

# =============================================================================
# PING TRAFFIC CONFIGURATION
# =============================================================================

# Enable continuous ping traffic
ENABLE_PING_TRAFFIC=true

# Enhanced ping targets (will be rotated)
PING_TARGETS="8.8.8.8,1.1.1.1,208.67.222.222,9.9.9.9,8.8.4.4,1.0.0.1"

# Enhanced ping intervals
PING_INTERVAL=15                # 15 seconds between ping sessions (more frequent)
PING_COUNT=20                   # More pings per session
PING_DELAY=0.1                  # Faster ping rate

# =============================================================================
# WI-FI CLIENT SIMULATION SETTINGS
# =============================================================================

# Wi-Fi good client settings (successful authentication)
WIFI_GOOD_INTERFACE=wlan0
WIFI_GOOD_HOSTNAME=CNXNMist-WiFiGood
WIFI_GOOD_REFRESH_INTERVAL=30   # More frequent checks

# Wi-Fi bad client settings (authentication failures)
WIFI_BAD_INTERFACE=wlan1
WIFI_BAD_HOSTNAME=CNXNMist-WiFiBad
WIFI_BAD_REFRESH_INTERVAL=45
WIFI_BAD_PASSWORD=wrongpassword123

# Connection timeout settings
WIFI_CONNECTION_TIMEOUT=30
WIFI_MAX_RETRY_ATTEMPTS=3

# =============================================================================
# WIRED CLIENT SIMULATION SETTINGS
# =============================================================================

# Wired client settings
WIRED_INTERFACE=eth0
WIRED_HOSTNAME=CNXNMist-Wired
WIRED_CONNECTION_NAME=wired-cnxnmist
WIRED_REFRESH_INTERVAL=30

# =============================================================================
# DASHBOARD DISPLAY SETTINGS
# =============================================================================

# Interface display filters
HIDE_LOOPBACK_INTERFACE=true    # Hide 'lo' interface from dashboard
HIDE_DOCKER_INTERFACES=true     # Hide docker0, veth* interfaces
SHOW_ONLY_PHYSICAL_INTERFACES=false  # Set to true to show only physical interfaces

# Interface display names (for dashboard)
INTERFACE_DISPLAY_NAMES="eth0:Ethernet,wlan0:Wi-Fi Primary,wlan1:Wi-Fi Secondary"

# Traffic display settings
SHOW_TRAFFIC_STATS=true         # Show bandwidth usage stats
UPDATE_TRAFFIC_STATS_INTERVAL=5 # Update stats every 5 seconds
ENABLE_THROUGHPUT_MONITORING=true # Enable real-time throughput monitoring

# =============================================================================
# THROUGHPUT MONITORING SETTINGS
# =============================================================================

# Enable bandwidth monitoring
ENABLE_BANDWIDTH_MONITORING=true
BANDWIDTH_MONITOR_INTERVAL=5    # Update every 5 seconds
BANDWIDTH_HISTORY_POINTS=60     # Keep 60 data points (5 minutes of history)

# Bandwidth monitoring tools
BANDWIDTH_MONITOR_TOOL=iftop    # Options: iftop, nload, vnstat
ENABLE_REALTIME_GRAPHS=true     # Show real-time bandwidth graphs

# Traffic shaping and QoS
ENABLE_TRAFFIC_SHAPING=false    # Enable traffic shaping (advanced)
QOS_PRIORITY_WIFI=true          # Prioritize Wi-Fi traffic in QoS

# =============================================================================
# NETWORK EMULATION SETTINGS
# =============================================================================

# Enable network emulation capabilities
ENABLE_NETEM=true

# Default netem interface
NETEM_INTERFACE=wlan0

# Default emulation settings (0 = disabled)
DEFAULT_LATENCY=0               # milliseconds
DEFAULT_PACKET_LOSS=0.0         # percentage
DEFAULT_BANDWIDTH_LIMIT=0       # Mbps (0 = unlimited)

# =============================================================================
# SYSTEM MONITORING SETTINGS
# =============================================================================

# Log rotation settings
LOG_MAX_SIZE=50M                # Larger log files for heavy traffic
LOG_RETAIN_COUNT=10             # Keep more log files

# System monitoring intervals
SYSTEM_MONITOR_INTERVAL=5       # seconds
INTERFACE_MONITOR_INTERVAL=5    # seconds (more frequent for real-time stats)
SERVICE_MONITOR_INTERVAL=15     # seconds

# Resource limits (adjusted for heavy Wi-Fi traffic)
MAX_CPU_PERCENT=90              # Allow higher CPU usage for traffic generation
MAX_MEMORY_PERCENT=80           # Allow more memory for traffic buffers

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Dashboard access control
DASHBOARD_REQUIRE_AUTH=false    # Set to true to enable basic auth
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=dashboard

# File permissions
CONFIG_FILE_PERMISSIONS=600     # SSID config file permissions
LOG_FILE_PERMISSIONS=664        # Log file permissions
SCRIPT_FILE_PERMISSIONS=755     # Script file permissions

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Service restart settings
SERVICE_RESTART_DELAY=10        # seconds between service restarts
SERVICE_MAX_RESTARTS=5          # maximum restarts per hour

# Network interface management
FORCE_INTERFACE_UP=true         # Force interfaces up during testing
INTERFACE_CHECK_INTERVAL=15     # More frequent interface checks

# Traffic generation optimization (enhanced for Wi-Fi)
ENABLE_TRAFFIC_BALANCING=false  # Disable balancing to focus Wi-Fi traffic
TRAFFIC_RANDOMIZATION=true      # Randomize traffic timing
MIN_TRAFFIC_INTERVAL=15         # Minimum seconds between traffic bursts (reduced)

# Enhanced Wi-Fi optimization
WIFI_POWER_SAVE_DISABLE=true    # Disable power saving on Wi-Fi
WIFI_REGULATORY_DOMAIN=US       # Set regulatory domain
WIFI_CHANNEL_OPTIMIZATION=true  # Enable channel optimization

# Debugging and diagnostics
ENABLE_DEBUG_LOGGING=false      # Enable verbose debug logging
ENABLE_PACKET_CAPTURE=false     # Enable packet capture for debugging
PACKET_CAPTURE_INTERFACE=""     # Interface for packet capture (empty = auto)

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================

# Juniper Mist specific settings
MIST_ORG_ID=""                  # Mist organization ID (if applicable)
MIST_API_TOKEN=""               # Mist API token (if applicable)
ENABLE_MIST_INTEGRATION=false   # Enable Mist cloud integration

# External monitoring
ENABLE_EXTERNAL_MONITORING=false
MONITORING_WEBHOOK_URL=""       # Webhook URL for external monitoring
MONITORING_INTERVAL=300         # seconds between monitoring reports

# =============================================================================
# ENVIRONMENT OVERRIDES
# =============================================================================

# These settings can be overridden by environment variables
# Export variables with the same names to override default values
# Example: export REFRESH_INTERVAL=60

# =============================================================================
# WI-FI ROAMING CONFIGURATION (NEW FEATURE v5.1.0)
# =============================================================================

# Enable/disable Wi-Fi roaming simulation
WIFI_ROAMING_ENABLED=true

# How often to roam between BSSIDs (seconds)
WIFI_ROAMING_INTERVAL=120

# How often to scan for available BSSIDs (seconds)  
WIFI_ROAMING_SCAN_INTERVAL=30

# Minimum signal strength to consider for roaming (dBm)
WIFI_MIN_SIGNAL_THRESHOLD=-75

# Signal difference required to trigger roaming (dB)
WIFI_ROAMING_SIGNAL_DIFF=10

# Roaming strategy: "round_robin", "signal_strength", "random"
WIFI_ROAMING_STRATEGY=signal_strength

# Log roaming events with enhanced detail
WIFI_ROAMING_VERBOSE_LOGGING=true

# =============================================================================
# ROAMING DEMONSTRATION ENHANCEMENTS
# =============================================================================

# Mist-specific optimizations for PoC demonstrations
MIST_DEMO_MODE=true              # Enable demo-friendly features
MIST_ROAMING_NOTIFICATIONS=true  # Log roaming events for demo visibility
MIST_CLIENT_NAMING=true          # Use Mist-friendly hostnames

# Enhanced logging for roaming events
ROAMING_EVENT_LOG_DETAIL=high    # Log level for roaming events
ROAMING_BSSID_DISCOVERY_LOG=true # Log BSSID discovery details
ROAMING_SIGNAL_MONITORING=true   # Monitor and log signal strength changes

# Demo timing optimizations
DEMO_ROAMING_FREQUENCY=enhanced  # More frequent roaming for demo impact
DEMO_TRAFFIC_CONTINUITY=true     # Maintain traffic flow during roaming
DEMO_BSSID_ANNOUNCEMENT=true     # Announce BSSID changes clearly in logs

# =============================================================================
# ADVANCED ROAMING SETTINGS
# =============================================================================

# Roaming behavior fine-tuning
ROAMING_DWELL_TIME=30           # Minimum time to stay on a BSSID (seconds)
ROAMING_BACKOFF_MULTIPLIER=1.5  # Increase interval after failed roaming
ROAMING_MAX_RETRIES=3           # Max roaming attempts before backing off
ROAMING_PREFER_5GHZ=true        # Prefer 5GHz BSSIDs when available
ROAMING_STICKY_THRESHOLD=5      # dB improvement needed to roam

# Pre-association scanning
ROAMING_PREASSOC_SCAN=true      # Scan before roaming attempts
ROAMING_SCAN_DWELL=100          # ms to dwell on each channel during scan

# Post-roaming validation
ROAMING_VALIDATE_CONNECTIVITY=true   # Test connectivity after roaming
ROAMING_VALIDATION_TIMEOUT=10        # seconds to validate new connection
ROAMING_FALLBACK_ENABLED=true        # Fall back to previous BSSID if validation fails

# Band Preference
WIFI_BAND_PREFERENCE=2.4

# Update version for roaming feature
ROAMING_FEATURE_VERSION=1.0.0

# Version information
CONFIG_VERSION=5.1.0
CONFIG_LAST_UPDATED=$(date '+%Y-%m-%d %H:%M:%S')